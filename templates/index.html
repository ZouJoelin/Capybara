{% extends "layout.html" %}


{% block main %}
<div>
    <form id="file-form">
        <div class="">
            <label class="form-label" for="files">上传文件</label>
            <input class="form-control" type="file" id="file" name="file" accept=".pdf" required autofocus>
        </div>
    </form>
    <form id="information-form">
        <div class="d-flex justify-content-between align-items-center">
            <label class="form-label" for="pages">页数</label>
            <input class="form-control form-control-plaintext input-box bg-primary text-white" type="number" id="pages"
                name="pages" value="0" readonly style="-moz-appearance: textfield; ">
        </div>

        <div class="d-flex justify-content-between align-items-center">
            <label class="form-label" for="paper_type">纸张</label>
            <input class="form-control form-control-plaintext input-box bg-primary text-white" type="text"
                id="paper_type" name="paper_type" value="A4" readonly>
        </div>

        <div class="d-flex justify-content-between align-items-center">
            <label class="form-label" for="color">颜色</label>
            <input class="form-control form-control-plaintext input-box bg-primary text-white" type="text" id="color"
                name="color" value="黑白" readonly>
        </div>

        <div class="d-flex justify-content-between align-items-center">
            <label class="form-label" for="sides">单双</label>
            <div class="btn-group" role="group" style="margin-top: 0.5rem; margin-bottom: 0.5rem;">

                <input type="radio" class="btn-check" id="one-sided" name="sides" value="one-sided">
                <label class="btn btn-outline-primary" for="one-sided">单面</label>

                <input type="radio" class="btn-check" id="two-sided-long-edge" name="sides" value="two-sided-long-edge"
                    checked>
                <label class="btn btn-outline-primary" for="two-sided-long-edge">双面长边</label>

                <input type="radio" class="btn-check" id="two-sided-short-edge" name="sides"
                    value="two-sided-short-edge">
                <label class="btn btn-outline-primary" for="two-sided-short-edge">双面短边</label>

            </div>
        </div>

        <div class="d-flex justify-content-between align-items-center">
            <label class="form-label" for="copies">份数</label>
            <input class="form-control input-box" type="number" id="copies" name="copies" value="1" min="1" required>
        </div>
    </form>

    <h1 class="text-danger text-end">
        <span>￥</span><span id="fee">0.00</span>
    </h1>
</div>

<div class="d-flex mt-3 gap-3 float-end">
    <form action="/pay" method="post">
        <button type="reset" class="btn btn-danger" id="reset-btn">取消</button>
        <button type="submit" class="btn btn-primary">支付并打印</button>
    </form>
</div>


<script>
    document.getElementById("reset-btn").addEventListener("click", resetForm);
    window.addEventListener("load", resetForm)

    function resetForm() {
        document.getElementById("file-form").reset();
        document.getElementById("information-form").reset();
        document.getElementById("fee").innerHTML = '0.00';

        let formData = new FormData();
        formData.append('source', 'index.html');
        fetch('/', {
            method: 'POST',
            body: formData
        }).then(response => {
            console.log(response);
        }).catch(error => {
            console.error(error);
        });
    }

</script>


{% endblock %}



{% block js %}

<script src="/static/js/auto_count.js"></script>

{% endblock %}